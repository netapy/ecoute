function JeSuisLanceur(){console.log("démarrage co");let e=document.getElementById("SaisieIDd").value;peer=new Peer(e,{host:"www.ecoute.app",port:9e3,path:"/ecouteapp"}),peer.on("open",function(e){console.log("My peer ID is: "+String(e)),idMoi=String(e)}),peer.on("error",e=>{console.log(e)}),peer.on("connection",function(e){console.log("connexion etabllie !!!! "),document.getElementById("txtStatut").innerHTML="Connecté",conn=e,idAutre=conn.peer,conn.on("data",function(e){alert(e)})}),peer.on("disconnected",function(){console.log("reconnexion..."),peer.reconnect()}),peer.on("call",function(e){console.log("appel entrant!"),call=e,call.on("stream",function(e){videoDiv=document.getElementById("vidFeedback"),videoDiv.srcObject=e,videoDiv.play()}),navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(function(e){call.answer(e)}).catch(function(e){console.log(e),alert("Faudra activer ta cam pour répondre à l'appel.")})})}function Connexion(){let e=document.getElementById("IdDuContact").value;idAutre=e,conn=peer.connect(e),document.getElementById("txtStatut").innerHTML="Connecté",conn.on("data",function(e){alert(e)})}function SendMessage(){let e=document.getElementById("idmsgAEnvoyer").value;conn.send(e)}function CallDude(){navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(function(e){console.log("lancement appel... a "+String(idAutre)),call=peer.call(idAutre,e)}).catch(function(e){console.log(e),alert("Faudra activer ta cam pour lancer l'appel.")})}function changementDeMenu(e){let n={EcranClasique:'<img src="assets/ecoute.svg" style="height: 150px; filter: brightness(1.1); position: absolute;">',BtnParam:"<div style=\"padding: 10px;\"><h3>Ecoute.app</h3><p><strong>Ecoute</strong> est entièrement libre d'utilisation et fonctionne entièrement sans utiliser vos données.<br>C'est comme utiliser un <strong>talkie-walkie</strong> sous stéroïdes.</p><p>-B</p></div>",BtnLaunchCom:'<h2 id="txtStatut">Init</h2><input type="text" placeholder="Choisis ton ID" id="SaisieIDd"><button onclick="JeSuisLanceur()">Definition</button><br><input type="text" placeholder="ID de ton contact (laisse vide si tes le 1)" id="IdDuContact"><button onclick="Connexion()">Connexion</button><br>',BtnRecepCom:'<h2>Messages</h2><video id="vidFeedback" width="320" height="240" controls></video><button onclick="CallDude()">Call</button><input type="text" placeholder="Message..." id="idmsgAEnvoyer"><button onclick="SendMessage()">Send</button>'};zoneParamID=document.getElementById("zonePrincipalee"),String(n[e.id]).trim()!=String(zoneParamID.innerHTML).trim()?(zoneParamID.style.transform="rotateX(-90deg)",setTimeout(()=>{zonePrincipalee.innerHTML=n[e.id],zoneParamID.style.transform="rotateX(0deg)"},300)):(zoneParamID.style.transform="rotateX(-90deg)",setTimeout(()=>{zonePrincipalee.innerHTML=n.EcranClasique,zoneParamID.style.transform="rotateX(0deg)"},300))}var peer,conn,call,idAutre,idMoi;document.getElementById("zonePrincipalee").innerHTML='<img src="assets/ecoute.svg" style="height: 150px; filter: brightness(1.1); position: absolute;">';